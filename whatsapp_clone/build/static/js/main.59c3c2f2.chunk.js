(this.webpackJsonpwhatsapp_clone=this.webpackJsonpwhatsapp_clone||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},124:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),n=a(75),r=a.n(n),i=(a(99),a(26)),j=a(12),d=(a(100),a(60)),o=a.n(d),b=a(79),h=a(147),l=a(148),u=a(149),O=a(150),p=a(151),m=a(154),x=a(156),f=(a(102),a(80)),v=a.n(f).a.create({baseURL:"http://localhost:9000"}),g=a(3);var N=function(e){e.name;var t=e.messages,a=Object(c.useState)(""),s=Object(j.a)(a,2),n=s[0],r=s[1],i=function(){var e=Object(b.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.post("/messages/new",{message:n,name:"Ayan",timestamp:(new Date).toUTCString(),received:!0});case 3:r("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"chat",children:[Object(g.jsxs)("div",{className:"chat_header",children:[Object(g.jsx)(m.a,{src:"https://avatars.dicebear.com/api/adventurer/man.svg"}),Object(g.jsxs)("div",{className:"chat_headerInfo",children:[Object(g.jsx)("h3",{children:"Room Name"}),Object(g.jsxs)("p",{children:["Last seen ",(new Date).toUTCString()]})]}),Object(g.jsxs)("div",{className:"chat_headerRight",children:[Object(g.jsx)(x.a,{children:Object(g.jsx)(h.a,{})}),Object(g.jsx)(x.a,{children:Object(g.jsx)(l.a,{})}),Object(g.jsx)(x.a,{children:Object(g.jsx)(u.a,{})})]})]}),Object(g.jsx)("div",{className:"chat_body",children:t.map((function(e){return Object(g.jsxs)("p",{className:"chat_message ".concat(e.received&&"chat_reciever"),children:[Object(g.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(g.jsx)("span",{className:"chat_timestamp",children:e.timestamp})]})}))}),Object(g.jsxs)("div",{className:"chat_footer",children:[Object(g.jsx)(x.a,{children:Object(g.jsx)(O.a,{})}),Object(g.jsxs)("form",{children:[Object(g.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)},placeholder:"Type a message",type:"text"}),Object(g.jsx)("button",{onClick:i,type:"submit",children:"Send a Message"})]}),Object(g.jsx)(x.a,{children:Object(g.jsx)(p.a,{})})]})]})},w=(a(124),a(83)),_=a.n(w),S=a(84),C=a.n(S),y=a(85),k=a.n(y),A=a(50),E=A.a.initializeApp({apiKey:"AIzaSyAr6oMoJSMt3kjLDM6_5cNJWXeOfcKwMxE",authDomain:"whatsapp-mern-7e2e9.firebaseapp.com",projectId:"whatsapp-mern-7e2e9",storageBucket:"whatsapp-mern-7e2e9.appspot.com",messagingSenderId:"302037392607",appId:"1:302037392607:web:4cf1b3e97f49f314d01d6a"}).firestore(),I=A.a.auth(),M=new A.a.auth.GoogleAuthProvider,R=E;a(130);var D=function(e){var t=e.name,a=e.addNewChat,s=Object(c.useState)(""),n=Object(j.a)(s,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[]),a?Object(g.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat room");e&&R.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(g.jsx)("h2",{children:"Add new Chat"})}):Object(g.jsxs)("div",{className:"sidebarChat",children:[Object(g.jsx)(m.a,{src:"https://avatars.dicebear.com/api/adventurer/".concat(r,".svg")}),Object(g.jsxs)("div",{className:"sidebarChat_info",children:[Object(g.jsx)("h2",{children:t}),Object(g.jsxs)("p",{children:["Last seen ",(new Date).toUTCString()]})]})]})},U=Object(c.createContext)(),L=function(e){var t=e.reducer,a=e.initialState,s=e.children;return Object(g.jsx)(U.Provider,{value:Object(c.useReducer)(t,a),children:s})},T=function(){return Object(c.useContext)(U)};var W=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],n=T(),r=Object(j.a)(n,2),i=r[0].user;return r[1],Object(c.useEffect)((function(){var e=R.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(g.jsxs)("div",{className:"sidebar",children:[Object(g.jsxs)("div",{className:"sidebar_header",children:[Object(g.jsx)(m.a,{src:null===i||void 0===i?void 0:i.photoURL}),Object(g.jsxs)("div",{className:"sidebar_headerRight",children:[Object(g.jsx)(x.a,{children:Object(g.jsx)(_.a,{})}),Object(g.jsx)(x.a,{children:Object(g.jsx)(C.a,{})}),Object(g.jsx)(x.a,{children:Object(g.jsx)(k.a,{})})]})]}),Object(g.jsx)("div",{className:"sidebar_search",children:Object(g.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(g.jsx)(x.a,{children:Object(g.jsx)(h.a,{})}),Object(g.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(g.jsxs)("div",{className:"sidebar_chats",children:[Object(g.jsx)(D,{addNewChat:!0}),a.map((function(e){return Object(g.jsx)(D,{id:e.id,name:e.data.name},e.id)}))]})]})},J=a(86),P=a.n(J),z=a(87),B=a(155),G=(a(131),a(63)),K="SET_USER",X=function(e,t){return console.log(t),t.type===K?Object(G.a)(Object(G.a)({},e),{},{user:t.user}):e};var q=function(){var e=T(),t=Object(j.a)(e,2);Object(z.a)(t[0]);var a=t[1];return Object(g.jsx)("div",{className:"login",children:Object(g.jsxs)("div",{className:"login_container",children:[Object(g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/225px-WhatsApp.svg.png",alt:""}),Object(g.jsx)("div",{className:"login_text",children:Object(g.jsx)("h1",{children:"Sign in to WhatsApp"})}),Object(g.jsx)(B.a,{type:"submit",onClick:function(){I.signInWithPopup(M).then((function(e){a({type:K,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"SignIn with Google"})]})})};var F=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],n=T(),r=Object(j.a)(n,2),d=r[0].user;return r[1],Object(c.useEffect)((function(){v.get("/messages/sync").then((function(e){s(e.data)}))}),[]),Object(c.useEffect)((function(){var e=new P.a("fa6b7753282ce84fc46c",{cluster:"ap2"}).subscribe("messages");return e.bind("inserted",(function(e){s([].concat(Object(i.a)(a),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[a]),Object(g.jsx)("div",{className:"app",children:d?Object(g.jsxs)("div",{className:"app_body",children:[Object(g.jsx)(W,{}),Object(g.jsx)(N,{messages:a})]}):Object(g.jsx)(q,{})})},H=a(89);r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(H.a,{children:Object(g.jsx)(L,{initialState:{user:null},reducer:X,children:Object(g.jsx)(F,{})})})}),document.getElementById("root"))},99:function(e,t,a){}},[[134,1,2]]]);
//# sourceMappingURL=main.59c3c2f2.chunk.js.map