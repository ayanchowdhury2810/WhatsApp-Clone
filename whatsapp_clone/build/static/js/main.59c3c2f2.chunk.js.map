{"version":3,"sources":["axios.js","Chat.js","firebase.js","SidebarChat.js","StateProvider.js","Sidebar.js","reducer.js","Login.js","App.js","index.js"],"names":["instance","axios","create","baseURL","Chat","name","messages","useState","input","setInput","sendMessage","e","a","preventDefault","post","message","timestamp","Date","toUTCString","received","className","Avatar","src","IconButton","SearchOutlined","AttachFile","MoreVert","map","InsertEmoticon","value","onChange","target","placeholder","type","onClick","Mic","db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","auth","provider","GoogleAuthProvider","SidebarChat","addNewChat","seed","setSeed","useEffect","Math","floor","random","roomName","prompt","collection","add","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","useReducer","useStateValue","useContext","Sidebar","rooms","setRooms","user","unsubscribe","onSnapshot","snapshot","docs","doc","id","data","photoURL","room","actionTypes","state","action","console","log","Login","dispatch","alt","Button","signInWithPopup","then","result","catch","error","alert","App","setMessages","get","response","channel","Pusher","cluster","subscribe","bind","newMessage","unbind_all","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.59c3c2f2.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL : 'http://localhost:9000',\r\n});\r\n\r\nexport default instance;","import { AttachFile, InsertEmoticon, Mic, MoreVert, SearchOutlined } from '@mui/icons-material'\r\nimport { Avatar, IconButton } from '@mui/material'\r\nimport React, { useState } from 'react'\r\nimport './Chat.css'\r\nimport axios from './axios'\r\n\r\nfunction Chat({ name, messages }) {\r\n\r\n    const [input, setInput] = useState(\"\");\r\n    // const [rooms, setRooms] = useState([]);\r\n    const sendMessage = async(e) =>{\r\n        e.preventDefault();\r\n    //     console.log('You typed ', input);\r\n        await axios.post('/messages/new',{\r\n            message: input,\r\n            name:'Ayan',\r\n            timestamp:new Date().toUTCString(),\r\n            received: true\r\n        })\r\n\r\n        setInput('');\r\n    }\r\n\r\n    return (\r\n        <div className='chat'>\r\n            <div className='chat_header'>\r\n                <Avatar src='https://avatars.dicebear.com/api/adventurer/man.svg'/>\r\n\r\n                <div className='chat_headerInfo'>\r\n                    <h3>Room Name</h3>\r\n                    <p>Last seen {new Date().toUTCString()}</p>\r\n                </div>\r\n\r\n                <div className='chat_headerRight'>\r\n                <IconButton>\r\n                        <SearchOutlined/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <AttachFile/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVert/>\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='chat_body'>\r\n            {messages.map((message)=>(\r\n                <p className={`chat_message ${message.received && \"chat_reciever\"}`}>\r\n                    <span className='chat_name'>{message.name}</span>\r\n                        {message.message}\r\n                    <span className='chat_timestamp'>{message.timestamp}</span>\r\n                </p>\r\n\r\n            ))}\r\n                \r\n                {/* <p className='chat_message chat_reciever'>\r\n                    <span className='chat_name'>Ayan</span>\r\n                        Message\r\n                    <span className='chat_timestamp'>{new Date().toUTCString()}</span>\r\n                </p>\r\n\r\n                <p className='chat_message'>\r\n                    <span className='chat_name'>Ayan</span>\r\n                        Message\r\n                    <span className='chat_timestamp'>{new Date().toUTCString()}</span>\r\n                </p> */}\r\n            </div>\r\n\r\n            <div className='chat_footer'>\r\n                <IconButton>\r\n                    <InsertEmoticon/>\r\n                </IconButton>\r\n                <form>\r\n                    <input value={input} onChange={(e)=>setInput(e.target.value)} placeholder='Type a message' type='text'/>\r\n                    <button onClick={sendMessage} type='submit'>Send a Message</button>\r\n                </form>\r\n                <IconButton>\r\n                    <Mic/>\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import firebase from 'firebase';\r\n// import 'firebase/auth';\r\n// import 'firebase/firestore';\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAr6oMoJSMt3kjLDM6_5cNJWXeOfcKwMxE\",\r\n    authDomain: \"whatsapp-mern-7e2e9.firebaseapp.com\",\r\n    projectId: \"whatsapp-mern-7e2e9\",\r\n    storageBucket: \"whatsapp-mern-7e2e9.appspot.com\",\r\n    messagingSenderId: \"302037392607\",\r\n    appId: \"1:302037392607:web:4cf1b3e97f49f314d01d6a\"\r\n  };\r\n\r\n  const firebaseApp = firebase.initializeApp(firebaseConfig);\r\n  const db = firebaseApp.firestore();\r\n  const auth = firebase.auth();\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n  export {auth, provider};\r\n  export default db;","import { Avatar } from '@mui/material'\r\nimport React, { useEffect, useState } from 'react'\r\n// import { Link } from 'react-router-dom';\r\nimport db from './firebase';\r\nimport './SidebarChat.css'\r\n\r\nfunction SidebarChat({ name, addNewChat}) {\r\n\r\n    const [seed, setSeed] = useState(\"\");\r\n\r\n    useEffect(()=>{\r\n        setSeed(Math.floor(Math.random()*5000))\r\n    },[])\r\n\r\n    const createChat = () =>{\r\n        const roomName = prompt(\"Please enter name for chat room\");\r\n        if(roomName){\r\n            db.collection('rooms').add({\r\n                name: roomName,\r\n            });\r\n        }\r\n    };\r\n\r\n    return !addNewChat ? (\r\n            <div className='sidebarChat'>\r\n                <Avatar src={`https://avatars.dicebear.com/api/adventurer/${seed}.svg`}/>\r\n                <div className='sidebarChat_info'>\r\n                    <h2>{name}</h2>\r\n                    <p>Last seen {new Date().toUTCString()}</p>\r\n                </div>\r\n            </div>\r\n    ) :(\r\n        <div onClick={createChat} className='sidebarChat'>\r\n            <h2>Add new Chat</h2>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SidebarChat\r\n","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({reducer, initialState, children})=>(\r\n    <StateContext.Provider value={useReducer (reducer, initialState)}>\r\n    {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue = () => useContext(StateContext);","import React, { useEffect, useState } from 'react'\r\nimport './Sidebar.css'\r\nimport DonutLargeIcon from '@mui/icons-material/DonutLarge';\r\nimport ChatIcon from '@mui/icons-material/Chat';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport { Avatar, IconButton } from '@mui/material';         // To make icon clickable, import IconButton\r\nimport {SearchOutlined} from '@mui/icons-material';\r\nimport SidebarChat from './SidebarChat';\r\nimport db from './firebase';\r\nimport { useStateValue } from './StateProvider';\r\n\r\nfunction Sidebar() {\r\n\r\n    // to show chatrooms directly from realtime database(firebase)\r\n    const [rooms, setRooms] = useState([]);\r\n    const [{user}, dispatch] = useStateValue();\r\n\r\n    useEffect(()=>{\r\n        const unsubscribe = db.collection('rooms').onSnapshot((snapshot)=>\r\n            setRooms(\r\n                snapshot.docs.map((doc)=>({\r\n                    id:doc.id,\r\n                    data:doc.data(),\r\n                }))\r\n            )\r\n        );\r\n        return () =>{\r\n            unsubscribe();\r\n        }\r\n    },[]);\r\n\r\n    return (\r\n        <div className='sidebar'>\r\n            <div className='sidebar_header'>\r\n                <Avatar src={user?.photoURL}/>\r\n                <div className='sidebar_headerRight'>\r\n                    <IconButton>\r\n                        <DonutLargeIcon/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <ChatIcon/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVertIcon/>\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='sidebar_search'>\r\n                <div className='sidebar_searchContainer'>\r\n                    <IconButton>\r\n                        <SearchOutlined/>\r\n                    </IconButton>\r\n                    <input placeholder='Search or start new chat' type='text'/>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='sidebar_chats'>\r\n                    <SidebarChat addNewChat/>\r\n                    {rooms.map(room=>(\r\n                        <SidebarChat key={room.id} id={room.id} name={room.data.name} />\r\n                    ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","export const initialState = {\r\n    user: null,\r\n};\r\n\r\nexport const actionTypes = {\r\n    SET_USER : 'SET_USER',\r\n};\r\n\r\nconst reducer = (state,action) => {\r\n    console.log(action);\r\n    switch(action.type){\r\n        case actionTypes.SET_USER:\r\n            return{\r\n                ...state, \r\n                user: action.user,\r\n            };\r\n\r\n            default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { Button } from '@mui/material';\r\nimport React from 'react'\r\nimport { auth, provider } from './firebase';\r\nimport \"./Login.css\";\r\nimport { actionTypes } from './reducer';\r\nimport { useStateValue } from './StateProvider';\r\n\r\nfunction Login() {\r\n\r\n    const [{}, dispatch] = useStateValue();\r\n\r\n    const signIn = () =>{\r\n        auth.signInWithPopup(provider)\r\n        .then((result)=>{\r\n            dispatch({\r\n                type: actionTypes.SET_USER,\r\n                user: result.user,\r\n            })\r\n        })\r\n        .catch((error)=>alert(error.message));\r\n    }\r\n\r\n    return (\r\n        <div className='login'>\r\n            <div className=\"login_container\">\r\n                <img src={\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/225px-WhatsApp.svg.png\"} alt=\"\"/>\r\n                <div className=\"login_text\">\r\n                    <h1>Sign in to WhatsApp</h1>\r\n                </div>\r\n\r\n                <Button type='submit' onClick={signIn}>SignIn with Google</Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login\r\n","import './App.css';\nimport Chat from './Chat';\nimport Sidebar from './Sidebar';\nimport Pusher from 'pusher-js'\nimport { useEffect, useState } from 'react';\nimport axios from './axios';\n// import {Route, Switch} from 'react-router-dom';\nimport Login from './Login';\nimport { useStateValue } from './StateProvider';\n\n\nfunction App() {\n\n  const [messages, setMessages] = useState([]);\n\n  // const [user, setUser] = useState(null);\n  const [{ user }, dispatch] = useStateValue();\n\n  useEffect(()=>{\n    axios.get('/messages/sync').then(response => {\n      setMessages(response.data);\n    })\n  },[])\n\n  useEffect(()=>{\n    const pusher = new Pusher('fa6b7753282ce84fc46c', {\n      cluster: 'ap2'\n    });\n\n    const channel = pusher.subscribe('messages');\n    channel.bind('inserted', (newMessage) => {\n      // alert(JSON.stringify(newMessage));\n      setMessages([...messages, newMessage])\n    });\n\n    // clean up function\n\n    return () => {\n      channel.unbind_all();\n      channel.unsubscribe();\n    }\n  },[messages])\n\n  // console.log(messages);\n\n  return (\n    <div className=\"app\">\n      {!user ? (\n        <Login/>\n      ):(\n        <div className=\"app_body\">\n          <Sidebar/>\n          <Chat messages={messages}/>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from 'react-router-dom';\nimport reducer, {initialState} from './reducer'\nimport { StateProvider } from './StateProvider';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <StateProvider initialState={initialState} reducer={reducer}>\n      <App />\n    </StateProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}